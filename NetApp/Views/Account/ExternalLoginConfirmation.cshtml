@model NetApp.Models.ExternalLoginConfirmationViewModel
@{
    ViewBag.Title = "Регистрация";
}

<h2 class="text-primary">Завершение регистрации</h2>

@using (Html.BeginForm("ExternalLoginConfirmation", "Account", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
{
    @Html.AntiForgeryToken()

    <!--script type="text/javascript">
        var script = document.createElement('SCRIPT');
        let UserId = @ViewBag.idUser
script.src = "https://api.vk.com/method/users.get?user_ids='.UserId.'&fields=bdate&v=5.103&callback=callbackFunc";
document.getElementsByTagName("head")[0].appendChild(script);
function callbackFunc(result) {

}
    </script-->
    <!--script>
    $("#vk_auth").click(function () {
        appId = '7138530';
        redirectUri = "http://triz.emsys-group.com/Login/VKLogin";
        url = 'https://oauth.vk.com/authorize?client_id=' + appId + '&display=popup&redirect_uri=' + redirectUri + '&scope=email&response_type=code&v=5.68';
        newWin = window.open(url, 'vk-login', 'width=665,height=370');
        newWin.onload = function () {
            newWin.close();
            window.location.href = "/Home/Dashboard";
        };

    });
</script-->
    <hr />
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
    <p class="text-info">
        Вы успешно авторизовались с помощью <strong>@ViewBag.LoginProvider</strong>.
        Пожалйуста, введите Email для этого приложения и нажмите кнопку "Зарегистрироваться" для заврешения процесса авторизации.
    </p>
    <div class="form-group">
        @Html.LabelFor(m => m.Email, new { @class = "col-md-2 control-label" })
        <div class="col-md-10">
            @Html.TextBoxFor(m => m.Email, new { @class = "form-control" })
            @Html.ValidationMessageFor(m => m.Email, "", new { @class = "text-danger" })
        </div>
    </div>
    <div class="form-group">
        <div class="col-md-offset-2 col-md-10">
            <input type="submit" class="btn btn-primary" value="Зарегистрироваться" />
        </div>
    </div>
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
